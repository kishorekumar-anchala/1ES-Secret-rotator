{
  "trigger": [
    "main"
  ],
  "pool": {
    "vmImage": "windows-latest"
  },
  "variables": {
    "buildConfiguration": "Release"
  },
  "steps": [
    {
      "task": "DotNetCoreCLI@2",
      "displayName": "Restore NuGet packages",
      "inputs": {
        "command": "restore",
        "projects": "**/*.csproj"
      }
    },
    {
      "task": "DotNetCoreCLI@2",
      "displayName": "Build the project",
      "inputs": {
        "command": "build",
        "projects": "**/*.csproj",
        "arguments": "--configuration $(buildConfiguration)"
      }
    },
    {
      "task": "DotNetCoreCLI@2",
      "displayName": "Run unit tests",
      "inputs": {
        "command": "test",
        "projects": "**/*Tests.csproj",
        "arguments": "--configuration $(buildConfiguration) --no-build --verbosity normal"
      }
    },
    {
      "task": "PublishBuildArtifacts@1",
      "displayName": "Publish Artifacts",
      "inputs": {
        "PathtoPublish": "$(Build.ArtifactStagingDirectory)",
        "ArtifactName": "drop",
        "publishLocation": "Container"
      }
    }
  ]
}
